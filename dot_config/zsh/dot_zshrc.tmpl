{{ if eq .chezmoi.os "darwin" -}}
    BREW_EXECUTABLE='{{ findExecutable "brew" (list "/opt/homebrew/bin" "/usr/local/bin") }}'
    export HOMEBREW_NO_ENV_HINTS=1
    export HOMEBREW_AUTO_UPDATE_SECS=604800
{{ else if eq .chezmoi.os "linux" -}}
    BREW_EXECUTABLE='{{ findExecutable "brew" (list "/home/linuxbrew/.linuxbrew/bin" "~/.linuxbrew/bin") }}'
    export HOMEBREW_NO_ENV_HINTS=1
    export HOMEBREW_AUTO_UPDATE_SECS=604800
{{ end }}
[[ -x "$BREW_EXECUTABLE" ]] && eval "$(${BREW_EXECUTABLE} shellenv 2>/dev/null || true)"

# export ZSH_CONFIG_DIR="${ZSH_CONFIG_DIR:-$HOME}"
# export ZSH_CACHE_DIR="${ZSH_CACHE_DIR:-$HOME}"
# export ZSH_DATA_DIR="${ZSH_DATA_DIR:-$HOME}"
# export ZDOTDIR="${ZDOTDIR:-$HOME}"

# 基础体验
setopt auto_cd                  # 输入目录名直接跳转
setopt auto_menu                # 自动菜单补全
setopt menu_complete            # 允许在补全菜单中选择
setopt no_beep                  # 禁止蜂鸣声
setopt interactive_comments	    # 交互模式下允许注释
setopt glob_dots                # 通配符使用包含隐藏文件
setopt no_nomatch               # 匹配失败不报错

# 历史记录 (优化去重和查找)
histsize=2000                   # 内存中保留的条数
savehist=50000                  # 文件中保存的条数
histfile="${ZSH_CACHE_DIR:-$HOME}/.zsh_history"
setopt extended_history         # 记录时间戳
setopt share_history            # 多终端实时共享历史
setopt hist_reduce_blanks       # 删除历史记录中的空行
setopt hist_ignore_dups         # 忽略连续重复命令
setopt hist_ignore_space        # 忽略空格开头的命令
setopt hist_find_no_dups        # 搜索时不显示重复项

. "$ZDOTDIR"/zshrc4h

z4h source   ohmyzsh/ohmyzsh/lib/directories.zsh
z4h load   ohmyzsh/ohmyzsh/plugins/sudo
z4h load   ohmyzsh/ohmyzsh/plugins/extract
z4h load   ohmyzsh/ohmyzsh/plugins/gitfast
z4h load   ohmyzsh/ohmyzsh/plugins/rsync
z4h load   ohmyzsh/ohmyzsh/plugins/cp
z4h load   ohmyzsh/ohmyzsh/plugins/virtualenv


# LS_COLORS is used by GNU ls and Zsh completions. LSCOLORS is used by BSD ls.
export LSCOLORS='ExGxDxDxCxDxDxFxFxexEx'
export LS_COLORS='fi=00:mi=00:mh=00:ln=01;36:or=01;31:di=01;34:ow=04;01;34:st=34:tw=04;34:'
LS_COLORS+='pi=01;33:so=01;33:do=01;33:bd=01;33:cd=01;33:su=01;35:sg=01;35:ca=01;35:ex=01;32'

# TREE_COLORS is used by GNU tree. It looks awful with underlined text, so we turn it off.
export TREE_COLORS=${LS_COLORS//04;}

unset LSCOLORS LS_COLORS TREE_COLORS
